<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="egovframework.example.sample.service.impl.ResveMapper">

    <!-- Resve -->
    <resultMap id="resve" type="resveVO">
		<result property="resveSn" column="resve_sn"/>
		<result property="mberSn" column="mber_sn"/>
		<result property="resveDt" column="resve_dt"/>
		<result property="resveTime" column="resve_time"/>
		<result property="tretmentNm" column="tretmnet_nm"/>
		<result property="processSttus" column="process_sttus"/>
		<result property="registId" column="regist_id"/>
		<result property="registDt" column="regist_dt"/>
	</resultMap>

    <select id="selectResve" parameterType="resveVO" resultMap="resve">

			select RESVE_SN,
			   MBER_SN,
		       RESVE_DT,
		       RESVE_TIME,
		       TRETMENT_NM,
		       PROCESS_STTUS,
		       REGIST_ID,
		       REGIST_DT,
		  	from t_resve_m
			where 1=1

	</select>

	<select id="selectResveList" parameterType="resveVO" resultType="egovMap">

			select a.RESVE_SN,
			   a.MBER_SN,
		       a.RESVE_DT,
		       a.RESVE_TIME,
		       a.TRETMENT_NM,
		       a.PROCESS_STTUS,
		       a.REGIST_ID,
		       a.REGIST_DT,
		  from t_resve_m a
	</select>

	<select id="selectResveListTotCnt" parameterType="resveVO" resultType="int">

			SELECT COUNT(*) totcnt
			FROM t_resve_m
			WHERE 1=1
	</select>


	<insert id="insertResve" parameterType="resveVO">
	    <selectKey keyProperty="resveSn" resultType="string" order="BEFORE">
	        select NEXTVAL(resve_seq) from dual
		    </selectKey>
			insert into t_resve_m (resve_sn, mber_sn, resve_dt, resve_time, tretment_nm, process_sttus, regist_id, regist_dt)
				values (
		   		#{resveSn},
				#{mberSn},
				#{resveDt},
				#{resveTime},
				#{tretmentNm},
				#{processSttus},
				#{registId},
				CURDATE()
				)
	</insert>

	<delete id="deleteResve">
	    delete from t_resve_m
	    where RESVE_SN =${resveSn}
	</delete>

</mapper>